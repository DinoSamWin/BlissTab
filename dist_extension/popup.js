import{b as L,j as e,R as N,r,G as k}from"./assets/GatewayCreateModal-fQTNZ94e.js";function U(){const[n,u]=r.useState(null),[d,h]=r.useState(["Shortcuts","Work","Personal"]),[m,x]=r.useState(null),[g,f]=r.useState("unauthenticated"),[i,b]=r.useState(null),[w,y]=r.useState(0),[p,j]=r.useState(!0);r.useEffect(()=>{chrome.tabs.query({active:!0,currentWindow:!0},t=>{if(t.length>0){const s=t[0];u({url:s.url||"",title:s.title||"",favIconUrl:s.favIconUrl||""})}}),chrome.storage.local.get(["gateways","user","subscriptionTier","limits"],t=>{const s=t.gateways||[];x(t.user||null),f(t.subscriptionTier||"unauthenticated"),b(t.limits||null),y(s.length);const l=new Set;l.add("Shortcuts"),s.forEach(o=>{o.category&&l.add(o.category)}),h(Array.from(l)),j(!1)})},[]);const v=t=>{const s={id:crypto.randomUUID(),url:t.url,title:t.title||new URL(t.url).hostname,icon:(n==null?void 0:n.favIconUrl)||null,color:"#cbd5e1",category:t.category,customLogoUrl:t.logoFile?URL.createObjectURL(t.logoFile):void 0},l=o=>{chrome.storage.local.set({pendingGateway:o},()=>{window.close()})};if(t.logoFile){const o=new FileReader;o.onloadend=()=>{s.customLogoUrl=o.result,l(s)},o.readAsDataURL(t.logoFile)}else l(s)},S=()=>{chrome.tabs.create({url:"chrome://extensions/shortcuts"})},a=()=>{chrome.tabs.create({url:"chrome://newtab"})};if(p||!n)return e.jsx("div",{className:"p-8 text-gray-500 text-sm flex items-center justify-center h-screen bg-gray-50",children:"Loading..."});if(!m)return e.jsxs("div",{className:"w-full h-full bg-white flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Login Required"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Please sign in on your new tab page to add gateways."}),e.jsx("button",{onClick:a,className:"px-6 py-2 bg-black text-white rounded-xl text-sm font-bold hover:scale-105 transition-transform",children:"Open New Tab"})]});const c=i&&i.GATEWAYS?g==="authenticated_subscribed"?i.GATEWAYS.SUBSCRIBED:i.GATEWAYS.FREE:5;return w>=c?e.jsxs("div",{className:"w-full h-full bg-white flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-50 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Limit Reached"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["You've reached the free limit of ",c," gateways. Upgrade to Pro for unlimited access."]}),e.jsx("button",{onClick:a,className:"px-6 py-2 bg-black text-white rounded-xl text-sm font-bold hover:scale-105 transition-transform",children:"Manage Subscription"})]}):e.jsxs("div",{className:"w-full h-full bg-black/90 relative",children:[e.jsx(k,{isOpen:!0,onClose:()=>window.close(),onSave:v,initialCategory:"Shortcuts",categories:d,initialUrl:n.url,initialTitle:n.title,initialIcon:n.favIconUrl}),e.jsx("div",{className:"absolute bottom-4 left-0 w-full flex justify-center pointer-events-none z-[100020]",children:e.jsx("button",{onClick:S,className:"text-[10px] text-gray-500 hover:text-white underline cursor-pointer pointer-events-auto",children:"Change Shortcut Key"})})]})}const C=L.createRoot(document.getElementById("root"));C.render(e.jsx(N.StrictMode,{children:e.jsx(U,{})}));
